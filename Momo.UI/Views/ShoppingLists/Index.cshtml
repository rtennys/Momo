@{
    ViewBag.Title = Request.RequestContext.RouteData.Values["username"];
}


@if (CurrentUser.IsRouteUsername())
{
    using (Html.BeginForm("add", null, FormMethod.Post, new {data_bind = "submit: onNewListSubmit"}))
    {
        @Html.AntiForgeryToken()
        <input type="text" name="Name" placeholder="new list" data-bind="'value': newListName, 'valueUpdate': 'afterkeydown'" />
        @Html.ValidationSummary()
    }
}


<p data-bind="'text': noItemsMsg, 'visible': shoppingLists().length == 0 && sharedLists().length == 0"></p>


<ul class="nav nav-tabs nav-stacked">

    <!-- ko foreach: shoppingLists -->
    <li>
        <a data-bind="'text': Name, 'attr': {'href': Url}" href="#"></a>
    </li>
    <!-- /ko -->

    <!-- ko if: sharedLists().length > 0 -->
        <li class="nav-header">Shared Lists</li>
        <!-- ko foreach: sharedLists -->
        <li>
            <a data-bind="'text': Name, 'attr': {'href': Url}" href="#"></a>
        </li>
        <!-- /ko -->
    <!-- /ko -->

</ul>


@section scripts
{
    <script>
        $.extend(app.urls, {
            index: '@Url.Action("Index")'
        });
    </script>

    @Scripts.Render("~/Scripts/Site.ShoppingLists.Index.js")
}
